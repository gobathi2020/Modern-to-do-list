<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern To-Do List App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Notification Permission Banner -->
    <div id="notificationBanner" class="notification-permission hidden">
        <div class="bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-3">
            <i class="fas fa-bell"></i>
            <span>Enable notifications for task reminders</span>
            <button onclick="requestNotificationPermission()" class="bg-white text-blue-500 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition-colors">
                Enable
            </button>
            <button onclick="hideNotificationBanner()" class="text-white hover:text-gray-200">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <div class="min-h-screen py-8 px-4">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8 header-mobile">
                <h1 class="text-4xl font-bold text-gray-800 dark:text-white mb-2">
                    <i class="fas fa-tasks text-blue-500 mr-3"></i>
                    Modern To-Do List
                </h1>
                <p class="text-gray-600 dark:text-gray-300">Stay organized and productive</p>
            </div>

            <!-- Controls -->
            <div class="container-3d rounded-xl p-6 mb-6">
                <div class="flex flex-col lg:flex-row gap-4 items-center justify-between">
                    <!-- Search Bar -->
                    <div class="relative flex-1 max-w-md">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input 
                            type="text" 
                            id="searchInput"
                            placeholder="Search tasks..."
                            class="form-input-3d w-full pl-10 pr-4 py-2 rounded-lg text-gray-900 dark:text-white"
                            oninput="searchTasks()"
                        >
                    </div>

                    <!-- Controls -->
                    <div class="flex items-center space-x-4">
                        <!-- Sort Dropdown -->
                        <select 
                            id="sortSelect"
                            onchange="sortTasks()"
                            class="form-input-3d px-4 py-2 rounded-lg text-gray-900 dark:text-white"
                        >
                            <option value="default">Default Order</option>
                            <option value="dueDate">Sort by Due Date</option>
                            <option value="priority">Sort by Priority</option>
                            <option value="category">Sort by Category</option>
                        </select>



                        <!-- Add Task Button -->
                        <button 
                            onclick="openAddTaskModal()"
                            class="btn-primary text-white px-6 py-2 rounded-lg font-semibold flex items-center space-x-2"
                        >
                            <i class="fas fa-plus"></i>
                            <span>Add Task</span>
                        </button>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="mt-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Progress</span>
                        <span id="progressText" class="text-sm text-gray-600 dark:text-gray-400">0 of 0 completed</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                        <div id="progressBar" class="progress-bar bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Task List -->
            <div class="container-3d rounded-xl p-8">
                <div id="taskList" class="max-h-96 overflow-y-auto custom-scrollbar p-4 mx-2">
                    <!-- Empty state will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div id="taskModal" class="fixed inset-0 modal-overlay hidden flex items-center justify-center z-50 p-4">
        <div class="modal-content bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 id="modalTitle" class="text-2xl font-bold text-gray-800 dark:text-white">Add New Task</h2>
                    <button onclick="closeTaskModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="taskForm" onsubmit="saveTask(event)">
                    <!-- Task Title -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Task Title</label>
                        <input 
                            type="text" 
                            id="taskTitle"
                            required
                            placeholder="Enter task title..."
                            class="form-input-3d w-full px-4 py-2 rounded-lg text-gray-900 dark:text-white"
                        >
                    </div>

                    <!-- Due Date and Time -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Due Date & Time</label>
                        <input 
                            type="datetime-local" 
                            id="taskDueDate"
                            min="2024-01-01T00:00"
                            max="2099-12-31T23:59"
                            class="form-input-3d w-full px-4 py-2 rounded-lg text-gray-900 dark:text-white"
                            onchange="validateDateInput(this)"
                        >
                        <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                            <i class="fas fa-info-circle mr-1"></i>
                            Select a future date and time (Year: 2024-2099)
                        </div>
                    </div>

                    <!-- Category -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Category</label>
                        <select 
                            id="taskCategory"
                            class="form-input-3d w-full px-4 py-2 rounded-lg text-gray-900 dark:text-white"
                        >
                            <option value="personal">Personal</option>
                            <option value="work">Work</option>
                            <option value="others">Others</option>
                            <option value="future">Future</option>
                        </select>
                    </div>

                    <!-- Priority -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority</label>
                        <div class="grid grid-cols-3 gap-2">
                            <label class="flex items-center justify-center p-3 border-2 border-red-200 rounded-lg cursor-pointer hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                                <input type="radio" name="priority" value="high" class="sr-only">
                                <div class="text-center">
                                    <i class="fas fa-exclamation-triangle text-red-500 mb-1"></i>
                                    <div class="text-sm font-medium text-red-700 dark:text-red-400">High</div>
                                </div>
                            </label>
                            <label class="flex items-center justify-center p-3 border-2 border-yellow-200 rounded-lg cursor-pointer hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors">
                                <input type="radio" name="priority" value="medium" class="sr-only" checked>
                                <div class="text-center">
                                    <i class="fas fa-minus-circle text-yellow-500 mb-1"></i>
                                    <div class="text-sm font-medium text-yellow-700 dark:text-yellow-400">Medium</div>
                                </div>
                            </label>
                            <label class="flex items-center justify-center p-3 border-2 border-green-200 rounded-lg cursor-pointer hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors">
                                <input type="radio" name="priority" value="low" class="sr-only">
                                <div class="text-center">
                                    <i class="fas fa-arrow-down text-green-500 mb-1"></i>
                                    <div class="text-sm font-medium text-green-700 dark:text-green-400">Low</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="flex space-x-3">
                        <button 
                            type="button"
                            onclick="closeTaskModal()"
                            class="btn-secondary flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 rounded-lg font-semibold"
                        >
                            Cancel
                        </button>
                        <button 
                            type="submit"
                            class="flex-1 btn-primary text-white px-4 py-2 rounded-lg font-semibold"
                        >
                            <span id="saveButtonText">Add Task</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
